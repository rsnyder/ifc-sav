<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta charset="UTF-8" />
    <title>Juncture IFC</title>
    <link href="https://v3.juncture-digital.org/images/favicon.png" rel="icon" type="image/png"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsify@4/themes/pure.css" />
  </head>
  <body>
    <div id="app"></div>

    <script src="//cdn.jsdelivr.net/npm/docsify@4"></script>
    <script>
      window.$docsify = {
        name: 'Juncture IFC',
        // logo: 'https://v3.juncture-digital.org/images/logo.svg',
        homepage: '/README.md',
        
        auto2top: true,
        alias: { '.*/_sidebar.md': '/sidebar.md' },
        loadSidebar: true,

        routerMode: 'hash', // hash or history
      };

      const actions = new Set('zoomto flyto play'.split(' '))
      setTimeout(() => {
        console.log('Setting up action links')
        document.querySelectorAll('a').forEach(a => {
          let path = a.href.split('/').slice(3).filter(p => p !== '#' && p !== '')
          if (actions.has(path[0])) {
            let action = path[0]
            let targetId = path[1]
            let args = path.slice(2)
            a.removeAttribute('href')
            a.style.cursor = 'pointer'
            a.style.color = 'blue'
            a.addEventListener('click', () => {
              const iframe = document.getElementById(targetId)
              iframe.contentWindow.postMessage({ action, args }, '*')
            });
          }
        })
      }, 2000)

    </script>
  </body>
</html>