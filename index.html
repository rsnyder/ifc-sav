<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta charset="UTF-8" />
    <title>Juncture IFC</title>
    <link href="https://v3.juncture-digital.org/images/favicon.png" rel="icon" type="image/png"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsify@4/themes/pure.css" />
  </head>
  <body>
    <div id="app"></div>

    <script src="//cdn.jsdelivr.net/npm/docsify@4"></script>
    <script>
      window.$docsify = {
        name: 'Juncture IFC',
        // logo: 'https://v3.juncture-digital.org/images/logo.svg',
        homepage: '/README.md',
        
        auto2top: true,
        alias: { '.*/_sidebar.md': '/sidebar.md' },
        loadSidebar: true,

        routerMode: 'hash', // hash or history
      };

      setTimeout(() => {
        document.querySelectorAll('a').forEach(a => {
          let path = a.href.split('/').slice(3)
          let idx = path.indexOf('zoomto')
          if (idx > -1) {
            let targetId = path[idx + 1]
            let region = path[idx + 2]
            a.removeAttribute('href');
            a.style.cursor = 'pointer';
            a.style.color = 'blue';
            a.addEventListener('click', () => {
              const iframe = document.getElementById(targetId);
              // Send a message to the iframe
              iframe.contentWindow.postMessage({action: 'zoomto', region }, '*'); 
            });
          }
        })
      }, 1000);

    </script>
  </body>
</html>